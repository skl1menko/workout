# Backend Server –¥–ª—è Workout App

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–∏–π backend —Å–µ—Ä–≤–µ—Ä —Å REST API –∏ SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üóÑÔ∏è **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üîÑ **REST API** - –ø–æ–ª–Ω—ã–π CRUD –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ health –¥–∞–Ω–Ω—ã—Ö
- üìä **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**: —à–∞–≥–∏, –ø—É–ª—å—Å, —Å–æ–Ω, –∫–∞–ª–æ—Ä–∏–∏, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- üîê **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- üìù **TypeScript** - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚ö° **Hot reload** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- üöÄ **Production ready** - –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd backend
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run build
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ **http://localhost:3001**

## üì° API Endpoints

### Health Check
```
GET /api/health
```

### Steps (–®–∞–≥–∏)
```
GET /api/steps?startDate=2024-01-01&endDate=2024-01-31
POST /api/steps
```

### Heart Rate (–ü—É–ª—å—Å)
```
GET /api/heart-rate?startDate=2024-01-01&endDate=2024-01-31
POST /api/heart-rate
```

### Sleep (–°–æ–Ω)
```
GET /api/sleep?startDate=2024-01-01&endDate=2024-01-31
POST /api/sleep
```

### Calories (–ö–∞–ª–æ—Ä–∏–∏)
```
GET /api/calories?startDate=2024-01-01&endDate=2024-01-31
POST /api/calories
```

### Workouts (–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)
```
GET /api/workouts?startDate=2024-01-01&endDate=2024-01-31&type=running
POST /api/workouts
```

### Summary (–°–≤–æ–¥–∫–∞)
```
GET /api/summary?date=2024-01-15
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–°–º. —Ñ–∞–π–ª `API_EXAMPLES.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
chmod +x test-api.sh
./test-api.sh
```

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React Native

```typescript
import { backendAPI } from './src/services';
import { useBackendSync } from './src/hooks';

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
const { syncToBackend } = useBackendSync(healthData, true);

// –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
await backendAPI.saveSteps({
  date: '2024-01-15',
  count: 12000,
  distance: 8.5,
  calories: 420
});
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `backend/data/health.db`

### –¢–∞–±–ª–∏—Ü—ã:
- `steps` - —à–∞–≥–∏ –ø–æ –¥–Ω—è–º
- `heart_rate` - –¥–∞–Ω–Ω—ã–µ –æ –ø—É–ª—å—Å–µ
- `sleep` - –¥–∞–Ω–Ω—ã–µ –æ —Å–Ω–µ
- `calories` - –¥–∞–Ω–Ω—ã–µ –æ –∫–∞–ª–æ—Ä–∏—è—Ö
- `workouts` - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- `distance` - –ø—Ä–æ–π–¥–µ–Ω–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `.env`:
```
PORT=3001
NODE_ENV=development
DATABASE_PATH=./data/health.db
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `README.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- `API_EXAMPLES.md` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- `../BACKEND_INTEGRATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `test-api.sh` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–î–ª—è production –¥–æ–±–∞–≤—å—Ç–µ:
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- Rate limiting
- HTTPS
- Input validation

## üö¢ –î–µ–ø–ª–æ–π

Backend –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞:
- Heroku
- AWS
- DigitalOcean
- Render
- Railway
- Fly.io

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ database.ts       # –†–∞–±–æ—Ç–∞ —Å SQLite
‚îÇ   ‚îú‚îÄ‚îÄ controllers.ts    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îî‚îÄ‚îÄ routes.ts         # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ health.db         # SQLite –±–∞–∑–∞ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ README.md
```

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Graceful shutdown
- ‚úÖ Error handling
- ‚úÖ Request logging
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ TypeScript —Ç–∏–ø—ã

## üêõ –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
npm run dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
sqlite3 data/health.db
> SELECT * FROM steps;

# –¢–µ—Å—Ç API
curl http://localhost:3001/api/health
```

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ endpoints:
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ `database.ts`
2. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ `controllers.ts`
3. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ `routes.ts`

## ‚ùì FAQ

**Q: –ü–æ—Ä—Ç 3001 –∑–∞–Ω—è—Ç?**
A: –ò–∑–º–µ–Ω–∏—Ç–µ PORT –≤ `.env` —Ñ–∞–π–ª–µ

**Q: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ React Native?**
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP –∞–¥—Ä–µ—Å –≤–º–µ—Å—Ç–æ localhost –≤ `config.ts`

**Q: –ö–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î?**
A: `sqlite3 backend/data/health.db` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏?**
A: –î–∞! API –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ª—é–±—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP

---

–°–æ–∑–¥–∞–Ω–æ –¥–ª—è Workout App üèÉ‚Äç‚ôÇÔ∏èüí™
